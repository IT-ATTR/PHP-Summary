# mysql 基础语法

登陆与退出MYSQL

    mysql  –u用户名  [-h服务器IP地址]  [-P端口]  -p密码

## 数据库操作

显示所有数据库

```sql
show databases;
```

创建数据库

    create databases 数据库名;

删除数据库

    drop databases 数据库名;
    drop database if exists 数据库;

选择数据库

    use 数据库;

## 数据表操作

显示数据表

    show table;
    show tables in 数据库名;

创建数据表

```sql
create table 表名(
    -- code
)engine=innodb comment '用户登陆表';
```

删除数据表

    drop table 表名;
    drop table if exists 表名;

显示表结构

```sql
describe 表名;
describe 表名\G
-- 推荐简写方式
desc 表名;
```

显示建表语句

    show create table 表名;
    show create table 表名\G

修改表属性

    alter table 表名 属性名=新属性值;
    alter table test engine=MyISAM;

修改表名或者将表迁移数据库

    rename table [库名.]旧表名 to [库名.]新表名;

## 数据操作

数据的基本操作

```sql
insert into 表名 values (字段1值, 字段2值, … 字段n值);
insert into 表名 (字段1, 字段2, … 字段n) values (字段1值, 字段2值, … 字段n值);
```

查询数据

```sql
select 字段列表 from [库名.]表名 [where 查询条件];
```

更新数据

```sql
update 表名 set 字段1=字段1新值, 字段2=字段2新值, …. 字段n=字段n新值 where 条件语句;
```

删除数据

```sql
delete from 表名 where 条件语句;
```

删清空表数据并且重新规划索引的操作
```sql
truncate [库名.]表名;
```

## 数据类型

### 整型类型

| 类型           | 大小   | 有符号（最小值/最大值）                             | 无符号（最小值/最大值）           |
| ------------ | ---- | ---------------------------------------- | ---------------------- |
| tinyint(m)   | 1个字节 | -128/127                                 | 0/255                  |
| smallint(m)  | 2个字节 | -32768/32767                             | 0/65535                |
| mediumint(m) | 3个字节 | -8388608/8388607                         | 0/16777215             |
| int(m)       | 4个字节 | -2147483648/2147483647                   | 0/4294967295           |
| bigint(m)    | 8个字节 | -9223372036854775808/9223372036854775807 | 0/18446744073709551615 |

`unsigned` 无符号

### 小数类型

| 类型            | 名称   | 大小             | 备注                      |
| ------------- | ---- | -------------- | ----------------------- |
| float(M, D)   | 单精度数 | 4个字节           | 默认精度位数为6到7位左右（取决于操作系统   |
| double(M, D)  | 双精度数 | 8个字节           | 默认精度位数为16到17位左右（取决于操作系统 |
| decimal(M, D) | 定点数  | 变长 大致是每9个数4个字节 | M最大为65默认为10；D最大为30默认为0  |

### 时间日期型

| 类型        | 显示格式                | 取值                                            | 大小   |
| --------- | ------------------- | --------------------------------------------- | ---- |
| DATETIME  | YYYY-MM-DD HH:MM:SS | 1000-01-01 00:00:00到9999-12-31 23:59:59       | 8个字节 |
| TIMESTAMP | YYYY-MM-DD HH:MM:SS | 1970-01-01 00:00:00到2038-01-19 03:14:07 （UTC） | 4个字节 |
| DATE      | YYYY-MM-DD          | 1000-01-01到9999-12-31                         | 3个字节 |
| TIME      | HH:MM:SS            | -838:59:59到838:59:59                          | 3个字节 |
| YEAR      | YYYY                | 1901到2155                                     | 1个字节 |

-   timestamp的默认值为当前时间的时间戳。
-   timestamp类型的极值需要注意时区。
-   time类型的数据还可以表示一个时间范围`7 0:0:0`七天。

### 字符串类型

| 类型         | 最大长度                         | 备注                         |
| ---------- | ---------------------------- | -------------------------- |
| char       | 定长字符类型：255个字符                | Char(M)，M表示字符数             |
| varchar    | 变长字符类型：65535字节，实际最大值为65532   | `Gbk<=32767` `Utf8<=21845` |
| tinyText   | (2^8) 256字节                  | 定义时无需指定长度，将会自动计算           |
| text       | (2^16)-1  65535字节，约64KB      | 定义时无需指定长度，将会自动计算           |
| mediumText | (2^24)-1  16777215字节，约16M    | 定义时无需指定长度，将会自动计算           |
| longText   | (2^32)-1字节  4294967295字节，约4G | 定义时无需指定长度，将会自动计算           |
| enum       | 枚举：数字65535	内部存储是整型           | 字段只能是某一个值                  |
| set	集合     | 最多占8个字节，即64个状态值              | 字段只能是某一个值                  |

## 修改表结构

向已有的一个表中添加字段

```sql
alter table 表名 add 新字段名 字段类型 [字段属性列表];
```

删除已有表中的某个字段

```sql
alter table 表名 drop 字段名
```

改变已有表中某个字段的名字

```sql
alter table 表名 change 旧字段名 新字段名 新字段类型 [字段属性];
```

修改表字段的类型或属性

```sql
alter table 表名 modify 字段名 字段新类型 [字段新属性列表];
```
