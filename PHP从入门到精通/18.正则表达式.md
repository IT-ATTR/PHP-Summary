## JavaScript之正则表达式
* 正则表达式也可以理解为规则表达式，一般用检索、替换符合某个规则(模式)的字符串。

**正则的定义**
* 第一种：隐式创建也叫字面量的形式创建（推荐）： 
`var  reg = /pattern/flags`

**说明：**
* 其中pattern就是我们的正则规则， 两个斜线/ /称为正则的定界符,flags就是正则标识。
* flags常用的正则标识有以下几个:
* g：代表global表示全局模式，即正则将被应用于匹配整个字符串，不加g只会匹配到第一个就会立即停止向后匹配。
* i：代表ignore,匹配的时候，表示不区分大小写。
* m: 代表Multiline ，匹配多行。

**重点掌握标识g和i,开发使用最多**

* 第二种：通过构造函数形式：var reg = new RegExp( 'pattern' , 'flag');

### 常用正则元字符
|代码|说明|
|:---:|:---|
|.|匹配除换行符以外的任意字符|
|\w|匹配字母数字或者下划线|
|\s|匹配任意字符|
|\d|匹配数字|
|\b|匹配单词的开始和结束|
|^|匹配字符串的开始|
|$|匹配字符串的结束|

### 常用限定符
|代码|说明|
|:---:|:---|
|*|重复0次或者多次|
|+|重复1次或者多次|
|？|重复0次或者1次|
|{n}|重复n次|
|{n,}|重复n次或者多次|
|{n,m}|重复n次到m次|

### 常用反义词
|代码|说明|
|:---:|:---|
|\W|跟\w相反|
|\S|跟\s相反|
|\D|跟\d相反|
|\B|跟\b相反|
|[^x]|匹配除了x以外的任意字符|

* 注意：在js中量词默认是贪婪匹配：{min-max},会匹配最大值max的数量。如果不想贪婪匹配可以在量词后面加个稳号?转为非贪婪模式，如：{min-max}? 就会匹配min的数量。


### 转义字符
**说明：在正则中匹配一些特殊字符需要转移，否则匹配不到，如匹配符号? ( ) * . @ \ /等特殊符号，需要在其前面加个反斜杠”\”进行转移。**
* 匹配点号 \.
* 匹配*号 \*
* 匹配一对小括号 \(\)

**对于有些特殊字符如@ - _等字符不需要转义也可以匹配到，但是还是建议都加上反斜杠进行转义，这是一个好的习惯，也可以防止错误。**

### 符号 “|” 或运算
* 语法：一个竖线”|”。满足竖线左边或右边的规则即算匹配到。


### 匹配正则的开始和结尾
* ^ ： 匹配字符串的开始，匹配的字符串需要满足指定的正则开头
* $ ： 匹配字符串的结束，匹配的字符串需要满足指定的正则结尾

### 需要注意/^ /和[^5-8]的区别：
* /^ /：以满足某个匹配规则开始,在正则表达式的最前面
* [^5-8] : 中括号^符号是取反（相反）的意思，[^5-8]：指匹配除开5到8中的任意字符

### 案例-匹配手机号
```
var reg = /^1[345689]\d{9}$/;
reg.test("13033989679");
```

### 案例-匹配邮箱
` /^[0-9a-zA-Z_-]+\@([0-9a-zA-Z_]+\.)+[a-zA-Z]{2,5}$/ `

### 正则对象的属性
* global：布尔值，表示是否设置了g标识。
* ignoreCase：布尔值，表示是否设置了i标识。
* multiline：布尔值，表示是否设置了m标识。
* source：正则表达式的字符串表示。
* lastIndex：整数，表示开始搜索下一个匹配项的字符位置，从0找起。如果加了全局标识g，此属性值会受到正则test方法的影响。

**正则标识中什么时候加g，什么时候不加g？**
```
不加g情况，如果要判断某个字符串是否满足正则，这种对于结果是true或false的，这时候不要加g，不加g正则一般在正则方法test方法中使用较多。因为不加g,正则对象lastIndex的属性值会以下标0 一直开始往后匹配。
如：判断一个字符串是否是手机号或者是邮箱格式，这类的正则不需要加g.
var reg = /正则/；


加g情况，如果要获取某个字符串满足特定正则的子串，因为满足的子串结果可能有多个，所以必须加全局g,若不加g则只会匹配到一个子串就会立即停止匹配。一般在字符串替换函数replace和字符串匹配子串match函数中使用较多。
如：需求：找出字符串中一个或多个连续的整数，保存在数组中并返回。 因为结果有多个，这时候的正则要加g,
var reg = /\d+/g
```

### 捕获组和反向引用
* 什么是捕获组（分组）？
* 答：在正则表达式中某些部分使用一些小括号()括起来的部分称之为捕获组。

**机号隐藏中间4位**
```
var tel = '13055089075';
var reg = /(\d{3})\d{4}(\d{4})/gi;
var newtel = tel.replace(reg,"$1****$2");
console.log( newtel );
```

### 非捕获组
* 给正则加括号（）一般是为了引用括号中的内容，如果加了括号（）只是为了把一些内容当成一个整体来匹配，但是后续又不引用它，这样把括号中的内容设置到正则缓冲区中就会有性能的损失，我们可以使用非捕获组来优化它。
`(?:正则表达式)`

### 案例-驼峰转换
* 将var str="border-bottom-color"变换成borderBottomColor
```
var str = "border-bottom-color";
var reg = /-(\w)/g;
var res = str.replace(reg,function($0,$1){
		console.log( $0 );//获得的是匹配的结果，-b,-c
		console.log( $1 );//获得的是匹配的结果，b,c
		return $1.toUpperCase();
	});
console.log( res );
```

### 案例-匹配中文
* javascript匹配正则中文：var reg=/[\u4e00-\u9fa5]+/gi;  
* PHP中正则匹配中文：$reg='/[\x{4e00}-\x{9fa5}]{2}/ui';

### 案例-匹配域名
`^(?:https?:\/\/)?(?:w{3}\.)?(?:\w+\.)+\w+$`

### IP正则
`^(?:(?:25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]?\d)$`

### qq正则
`^\d{3,12}$`

### 身份证号正则
`^\d{17}[\d|X]$`

### js中正则、字符串和数组常用的函数
* 正则对象函数	test()：使用最多，重点掌握，检测一个字符串str是否匹配正则模式
* charAt(n)：返回字符串中第n个字符
* split(): 把字符串依据某些字符分割成数组，类似php的explode()函数
* substring():  返回一个字符串中的特定条件的子串，类似php中的substr()
* match(): 匹配获取正则匹配到的子串
* replace(): 替换正则匹配到的子串
* repeat():重复一个字符串多少次，相当于php的str_repeat()
* toLowerCase() 将字符串转换成小写
* toUpperCase() 将字符串转换成大写
* join() 把数组依据某个字符连接成一个字符串，类似php的implode()函数
* pop() 删除并返回数组的最后一个元素
* push() 给数组添加元素


